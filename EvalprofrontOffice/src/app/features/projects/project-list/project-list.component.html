<div class="project-list-container">
  <table *ngIf="dossiers && dossiers.length > 0" class="project-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Titre</th>
      
        <th>Situation</th>
        <th>Statut du dossier</th>
        <th>Progression</th>
        <th>Derni√®re modification</th>
        <th>Date cr√©ation</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let dossier of paginatedDossiers">
        <td><strong>{{ dossier.code }}</strong></td>
        <td><span class="project-title">{{ dossier.nomOfficielProjet }}</span></td>

        <td>{{ dossier.situation || 'Cr√©ation' }}</td>
        <td>{{ dossier.statusLabel || 'En pr√©paration' }}</td>
        <td>
          <div class="steps-container">
            <ng-container *ngFor="let key of getStepKeys(dossier.steps); let i = index">
              <div class="step-chip" [class.done]="dossier.steps[key] === 100"
                [class.inprogress]="dossier.steps[key] > 0 && dossier.steps[key] < 100"
                [attr.title]="key + ' ¬∑ ' + dossier.steps[key] + '%'">
                <div class="chip-head">
                  <span class="chip-index">{{ i + 1 }}</span>
                  <span class="chip-label">{{ key }}</span>
                  <span class="chip-percent">{{ dossier.steps[key] }}%</span>
                  <i class="fas fa-check chip-check"></i>
                </div>
                <div class="chip-bar">
                  <div class="chip-bar-fill" [style.width.%]="dossier.steps[key]"></div>
                </div>
              </div>
            </ng-container>
          </div>
        </td>

        <td>{{ dossier.updatedAt | date:'short' }}</td>
        <td>{{ dossier.createdAt | date:'short' }}</td>
        <td>
          <a [routerLink]="['/projects/edit', dossier.id, 'step' + dossier.lastCompletedStep]"
            class="action-link">‚úèÔ∏èModifier</a>|
          <a href="#" (click)="deleteDossier(dossier.id, $event)" class="action-link delete">üóëÔ∏è Supprimer</a>

        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination -->
  <div class="pagination" *ngIf="totalPages > 1">
    <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">&lt;</button>
    <button *ngFor="let page of pages" (click)="goToPage(page)" [class.active]="page === currentPage">{{ page
      }}</button>
    <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">&gt;</button>
  </div>
</div>