<header class="topbar">
  <div class="left-section">
    <i class="fas fa-bars toggle-icon" (click)="toggleSidebar()"></i>
    <span class="breadcrumb">Accueil / Dashboard</span>
  </div>

  <div class="right-section">
    <!-- REMPLACER CETTE SECTION -->
    <!-- Notifications (mêmes classes / même design) -->
    <div class="notifications">
      <!-- CLOche -->
      <div class="notification-icon">
        <i class="fas fa-bell"></i>

        <!-- badge dynamique : caché si 0 -->
        <span class="notification-badge" *ngIf="(unread$ | async) as c; else noBadge">{{ c }}</span>
        <ng-template #noBadge></ng-template>

        <!-- dropdown (toujours géré par ton :hover en CSS) -->
        <div class="notification-dropdown">
          <div class="notification-header">
            <span class="notification-title">Notifications</span>
            <span class="mark-all-read" (click)="markAll(); $event.stopPropagation()">Tout marquer comme lu</span>
          </div>

          <!-- liste dynamique (5 dernières) -->
          <ng-container *ngIf="(items$ | async) as items">
            <div class="notification-item" *ngFor="let n of items | slice:0:5; trackBy: trackById"
              [class.unread]="!n.readFlag" (click)="openNote(n); $event.stopPropagation()">
              <div class="notification-icon-wrapper" [attr.data-type]="n.type">
                <i class="fas" [ngClass]="{
                 'fa-comment-dots': n.type==='STEP_COMMENT',
                 'fa-check-circle': n.type==='DOSSIER_ACCEPTED',
                 'fa-times-circle': n.type==='DOSSIER_REJECTED',
                 'fa-exclamation-triangle': n.type==='DOSSIER_NEEDS_CHANGES' || n.type==='NEEDS_CHANGES'
               }"></i>
              </div>
              <div class="notification-content">
                <div class="notification-message">{{ n.title }}</div>
                <div class="notification-time">{{ n.createdAt | date:'short' }}</div>
              </div>
            </div>

            <div class="notification-footer">
              <span class="view-all" (click)="goAll(); $event.stopPropagation()">Voir toutes</span>
            </div>
          </ng-container>
        </div>
      </div>

      <!-- ton 2e icône (messages) laissé tel quel -->
      <div class="notification-icon">
        <i class="fas fa-comments"></i>
        <span class="notification-badge">5</span>
      </div>
    </div>



    <!-- FIN DE LA SECTION REMPLACÉE -->

    <div class="profile">
      <div class="profile-info">
        <span class="profile-name">Slimani Asma</span>
        <span class="profile-role">Administrateur</span>
      </div>
      <div class="avatar">S</div>
      <div class="dropdown">
        <a href="#"><i class="fas fa-user"></i> Mon compte</a>
        <a href="#" (click)="logout()"><i class="fas fa-sign-out-alt"></i> Déconnexion</a>
      </div>
    </div>
  </div>
</header>